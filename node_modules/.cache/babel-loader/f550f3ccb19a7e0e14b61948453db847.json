{"ast":null,"code":"var _jsxFileName = \"/home/anhhuynh/front_reactjs-/src/components/navbar/SignUpContainer.js\";\nimport React, { Component } from \"react\";\nimport SignUpForm from \"./SignUpForm.js\";\nimport axios from 'axios';\nimport { validateSignUpForm } from \"./validateSignup\";\n\nconst zxcvbn = require(\"zxcvbn\");\n\nclass SignUpContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errors: {},\n      user: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        pwconfirm: \"\"\n      },\n      btnTxt: \"show\",\n      type: \"password\",\n      score: \"0\"\n    };\n    this.pwMask = this.pwMask.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.submitSignup = this.submitSignup.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n    this.pwHandleChange = this.pwHandleChange.bind(this);\n  }\n\n  handleChange(event) {\n    const field = event.target.name;\n    const user = this.state.user;\n    user[field] = event.target.value;\n    this.setState({\n      user\n    });\n  }\n\n  pwHandleChange(event) {\n    const field = event.target.name;\n    const user = this.state.user;\n    user[field] = event.target.value;\n    this.setState({\n      user\n    });\n\n    if (event.target.value === \"\") {\n      this.setState(state => Object.assign({}, state, {\n        score: \"null\"\n      }));\n    } else {\n      var pw = zxcvbn(event.target.value);\n      this.setState(state => Object.assign({}, state, {\n        score: pw.score + 1\n      }));\n    }\n  }\n\n  submitSignup(user) {\n    var params = {\n      username: user.usr,\n      password: user.pw,\n      email: user.email\n    };\n    axios.post(\"http://localhost:8000/api/user/register\", params).then(res => {\n      localStorage.token = res.data.token;\n      localStorage.isAuthenticated = true;\n      window.location.reload();\n    }).catch(err => {\n      console.log(\"Sign up data submit error: \", err);\n    });\n  }\n\n  validateForm(event) {\n    event.preventDefault();\n    var payload = validateSignUpForm(this.state.user);\n\n    if (payload.success) {\n      this.setState({\n        errors: {}\n      });\n      var user = {\n        usr: this.state.user.name,\n        pw: this.state.user.password,\n        email: this.state.user.email\n      };\n      this.submitSignup(user);\n    } else {\n      const errors = payload.errors;\n      this.setState({\n        errors\n      });\n    }\n  }\n\n  pwMask(event) {\n    event.preventDefault();\n    this.setState(state => Object.assign({}, state, {\n      type: this.state.type === \"password\" ? \"input\" : \"password\",\n      btnTxt: this.state.btnTxt === \"show\" ? \"hide\" : \"show\"\n    }));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(SignUpForm, {\n      onSubmit: this.validateForm,\n      onChange: this.handleChange,\n      onPwChange: this.pwHandleChange,\n      errors: this.state.errors,\n      user: this.state.user,\n      score: this.state.score,\n      btnTxt: this.state.btnTxt,\n      type: this.state.type,\n      pwMask: this.pwMask,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default SignUpContainer;","map":{"version":3,"sources":["/home/anhhuynh/front_reactjs-/src/components/navbar/SignUpContainer.js"],"names":["React","Component","SignUpForm","axios","validateSignUpForm","zxcvbn","require","SignUpContainer","constructor","props","state","errors","user","name","email","password","pwconfirm","btnTxt","type","score","pwMask","bind","handleChange","submitSignup","validateForm","pwHandleChange","event","field","target","value","setState","Object","assign","pw","params","username","usr","post","then","res","localStorage","token","data","isAuthenticated","window","location","reload","catch","err","console","log","preventDefault","payload","success","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport SignUpForm from \"./SignUpForm.js\";\nimport axios from 'axios';\nimport {validateSignUpForm} from \"./validateSignup\";\nconst zxcvbn = require(\"zxcvbn\");\n\nclass SignUpContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errors: {},\n      user: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        pwconfirm: \"\"\n      },\n      btnTxt: \"show\",\n      type: \"password\",\n      score: \"0\"\n    };\n\n    this.pwMask = this.pwMask.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.submitSignup = this.submitSignup.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n    this.pwHandleChange = this.pwHandleChange.bind(this);\n  }\n\n  handleChange(event) {\n    const field = event.target.name;\n    const user = this.state.user;\n    user[field] = event.target.value;\n\n    this.setState({\n      user\n    });\n  }\n\n  pwHandleChange(event) {\n    const field = event.target.name;\n    const user = this.state.user;\n    user[field] = event.target.value;\n\n    this.setState({\n      user\n    });\n\n    if (event.target.value === \"\") {\n      this.setState(state =>\n        Object.assign({}, state, {\n          score: \"null\"\n        })\n      );\n    } else {\n      var pw = zxcvbn(event.target.value);\n      this.setState(state =>\n        Object.assign({}, state, {\n          score: pw.score + 1\n        })\n      );\n    }\n  }\n\n  submitSignup(user) {\n    var params = { username: user.usr, password: user.pw, email: user.email };\n    axios\n      .post(\"http://localhost:8000/api/user/register\", params)\n      .then(res => {\n         \n          localStorage.token = res.data.token;\n          localStorage.isAuthenticated = true;\n          window.location.reload();\n      \n      })\n      .catch(err => {\n        console.log(\"Sign up data submit error: \", err);\n      });\n  }\n\n  validateForm(event) {\n    event.preventDefault();\n    var payload = validateSignUpForm(this.state.user);\n    if (payload.success) {\n      this.setState({\n        errors: {}\n      });\n      var user = {\n        usr: this.state.user.name,\n        pw: this.state.user.password,\n        email: this.state.user.email\n      };\n      this.submitSignup(user);\n    } else {\n      const errors = payload.errors;\n      this.setState({\n        errors\n      });\n    }\n  }\n\n  pwMask(event) {\n    event.preventDefault();\n    this.setState(state =>\n      Object.assign({}, state, {\n        type: this.state.type === \"password\" ? \"input\" : \"password\",\n        btnTxt: this.state.btnTxt === \"show\" ? \"hide\" : \"show\"\n      })\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <SignUpForm\n          onSubmit={this.validateForm}\n          onChange={this.handleChange}\n          onPwChange={this.pwHandleChange}\n          errors={this.state.errors}\n          user={this.state.user}\n          score={this.state.score}\n          btnTxt={this.state.btnTxt}\n          type={this.state.type}\n          pwMask={this.pwMask}\n        />\n      </div>\n    );\n  }\n}\n\nexport default SignUpContainer;\n"]},"metadata":{},"sourceType":"module"}